<!-- 代币兑换率设置 -->
<div class="container mt-4">
  <div class="card mb-6">
    <header class="card-header">
      <p class="card-header-title">
        <span class="icon"><i class="fas fa-exchange-alt"></i></span>
        代币兑换率设置
      </p>
    </header>
    <div class="card-content">
      <div class="field">
        <label class="label">代币地址</label>
        <div class="control">
          <div
            class="select-wrapper token-select-container"
            style="position: relative; width: 100%"
          >
            <!-- 自定义下拉组件 -->
            <div
              id="customTokenDropdown"
              class="custom-dropdown"
              style="position: relative"
            >
              <!-- 选中项显示区域 -->
              <div
                class="custom-dropdown-selected"
                style="
                  display: flex;
                  align-items: center;
                  padding: 12px 20px 12px 40px;
                  border: 1px solid #ddd;
                  border-radius: 8px;
                  background-color: #fff;
                  cursor: pointer;
                  transition: border-color 0.3s ease, box-shadow 0.3s ease;
                  min-width: 350px;
                "
              >
                <div
                  class="selected-icon"
                  style="
                    position: absolute;
                    left: 0.75rem;
                    width: 1.5rem;
                    height: 1.5rem;
                  "
                >
                  <img
                    id="selectedTokenIconImg"
                    src=""
                    alt="代币图标"
                    style="
                      width: 100%;
                      height: 100%;
                      border-radius: 50%;
                      display: none;
                      object-fit: cover;
                    "
                  />
                </div>
                <span
                  id="selectedTokenText"
                  style="
                    font-size: 14px;
                    color: #333;
                    flex: 1;
                    white-space: nowrap;
                    overflow: hidden;
                    text-overflow: ellipsis;
                  "
                  >请选择代币</span
                >
                <!-- 下拉箭头已移除 -->
              </div>
              <!-- 下拉选项列表 -->
              <div
                id="tokenDropdownList"
                class="custom-dropdown-list"
                style="
                  position: absolute;
                  top: 100%;
                  left: 0;
                  min-width: 350px;
                  max-height: 300px;
                  overflow-y: auto;
                  background-color: #fff;
                  border: 1px solid #ddd;
                  border-top: none;
                  border-radius: 0 0 8px 8px;
                  display: none;
                  z-index: 1000;
                  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
                "
              >
                <!-- JavaScript 动态生成选项 -->
              </div>
            </div>
            <input
              type="hidden"
              id="tokenAddress"
              name="tokenAddress"
              required
            />
          </div>
        </div>
        <p class="help">选择要设置兑换率的代币</p>
      </div>

      <div class="field">
        <div class="notification is-light">
          <p>代币精度: <span id="tokenDecimals">请选择代币</span></p>
        </div>
      </div>

      <div class="field">
        <div class="notification is-light">
          <p>
            合约持有代币数量:
            <span id="contractTokenBalance">请选择代币</span>
          </p>
        </div>
      </div>

      <div class="field">
        <label class="label">兑换率</label>
        <div class="columns">
          <div class="column is-5">
            <div class="control has-icons-right">
              <input
                type="number"
                id="targetTokenAmount"
                class="input"
                placeholder="1"
                min="0.000001"
                step="0.000001"
                value="1"
              />
              <span class="icon is-right">
                <span id="tokenName" class="tag is-primary">--</span>
              </span>
            </div>
          </div>
          <div class="column is-2">
            <div class="has-text-centered" style="margin-top: 0.5rem">=</div>
          </div>
          <div class="column is-5">
            <div class="control has-icons-right">
              <input
                type="number"
                id="frTokenAmount"
                class="input"
                placeholder="FR数量"
                min="0.000001"
                step="0.000001"
              />
              <span class="icon is-right">
                <span class="tag is-success">FR</span>
              </span>
            </div>
          </div>
        </div>
        <p class="help">
          设置目标代币与FR代币之间的兑换关系，将自动计算分子分母
        </p>
      </div>

      <div class="field">
        <label class="label">最大兑换数量</label>
        <div class="control has-icons-right">
          <input
            type="number"
            id="maxExchangeAmount"
            class="input"
            placeholder="最大兑换数量"
            min="0"
            step="0.000001"
          />
          <span class="icon is-right">
            <span id="maxExchangeTokenName" class="tag is-primary">--</span>
          </span>
        </div>
        <p class="help">设置该代币的最大兑换数量，255表示无限制</p>
      </div>

      <div class="field">
        <label class="label">代币类型</label>
        <div class="control">
          <div class="select" style="width: 100%">
            <select id="transferType" style="width: 100%; padding: 0.5rem">
              <option value="0">标准ERC20</option>
              <option value="1">非标准ERC20</option>
            </select>
          </div>
        </div>
        <p class="help">选择代币兑换后的转账方式</p>
      </div>

      <div class="field">
        <label class="label">持续周期</label>
        <div class="control">
          <div class="select" style="width: 100%">
            <select id="durationWeeks" style="width: 100%; padding: 0.5rem">
              <option value="1">1周</option>
              <option value="2">2周</option>
              <option value="5">5周</option>
              <option value="9">9周</option>
              <option value="13">13周</option>
              <option value="55">55周</option>
              <option value="255">永久</option>
            </select>
          </div>
        </div>
        <p class="help">设置此兑换率的持续时间</p>
      </div>

      <div class="field">
        <div class="control">
          <button id="setRateButton" class="button is-primary" disabled>
            <i class="fas fa-save mr-2"></i>设置代币兑换率
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
